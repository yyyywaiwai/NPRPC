# 要件定義書

## 1. プロジェクト概要
### 1.1 プロジェクト名
iPhone音楽情報 → Discord連携アプリ

### 1.2 目的
iPhoneで現在再生中の音楽情報をDiscordのステータスに自動表示し、音楽体験を友人と共有する

### 1.3 背景
- 現在再生中の音楽をDiscordで友人と共有したいニーズが高い
- PCで動作するRPCサーバーを活用してリアルタイム連携を実現
- iPhoneアプリからPCへのシームレスな情報伝達が必要

## 2. ステークホルダー
### 2.1 プロジェクトメンバー
- 開発者（iOS/Swift開発、RPC実装）

### 2.2 エンドユーザー
- Discord利用者
- iPhone利用者
- 音楽愛好家

## 3. 機能要件
### 3.1 主要機能
1. **iPhone音楽情報取得**
   - 現在再生中の曲名、アーティスト名、アルバム名の取得
   - 再生状態（再生中/一時停止）の検知

2. **RPC通信**
   - PCのRPCサーバーとの接続・通信
   - 音楽情報の送信

3. **Discord連携**
   - DiscordのRich Presence機能を使用したステータス表示
   - 曲情報の自動更新

### 3.2 詳細機能
1. **接続管理**
   - RPCサーバーの自動検出
   - 接続状態の監視・自動復旧

2. **UI機能**
   - 現在の再生状況表示
   - 接続状態表示
   - 設定画面（サーバー情報等）

3. **バックグラウンド処理**
   - アプリがバックグラウンドでも動作継続
   - 定期的な音楽情報の更新

## 4. 非機能要件
### 4.1 性能要件
- 音楽情報の更新頻度：1-2秒間隔
- RPC通信の応答時間：500ms以内
- バッテリー消費：最小限に抑制

### 4.2 セキュリティ要件
- ローカルネットワーク内での通信
- 認証機能（必要に応じて）

### 4.3 可用性要件
- アプリ起動時の自動接続
- 接続失敗時の自動リトライ

### 4.4 保守性要件
- SwiftUIによる保守性の高いUI
- モジュール化された設計

## 5. 制約事項
### 5.1 技術的制約
- iOS 15.0以上
- Swift 5.0以上
- SwiftUI使用
- MediaPlayer framework使用

### 5.2 予算制約
- 個人開発プロジェクト
- 無料のライブラリ・ツールを使用

### 5.3 スケジュール制約
- 迅速な開発・実装を優先

## 6. 前提条件
- PCでRPCサーバーが動作していること
- iPhoneとPCが同一ネットワークに接続されていること
- Discordアプリケーションが登録されていること
- iPhoneでApple MusicまたはSpotifyが使用可能であること

## 7. 除外事項
- Android版の開発
- 複数のDiscordアカウントへの同時送信
- 音楽ストリーミングサービス以外のメディア対応

## 8. 成功基準
- iPhoneで再生中の音楽がDiscordステータスに正確に表示される
- 音楽変更時に1-2秒以内でステータスが更新される
- アプリが安定して動作する（クラッシュしない）

## 9. リスク
- iOS音楽情報取得の制限
- RPCサーバーとの通信不具合
- Discordの仕様変更
- バックグラウンド処理の制限

## 10. 承認
| 役職 | 氏名 | 承認日 | 署名 |
|------|------|--------|------|
| 開発者 |      |        |      |